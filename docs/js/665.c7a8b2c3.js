"use strict";(self["webpackChunkrapidreader"]=self["webpackChunkrapidreader"]||[]).push([[665],{3665:(t,e,r)=>{r.r(e),r.d(e,{default:()=>L});var l=r(3673),s=r(2323);const o={class:"row justify-center"},a={class:"column",style:{width:"66%"}},i={class:"row justify-center q-mb-md"},n={class:"row"},c=(0,l._)("div",{class:"col"},null,-1),d={class:"col-10"},h=(0,l._)("div",{class:"col"},null,-1);function u(t,e,r,u,p,m){const w=(0,l.up)("word-display"),g=(0,l.up)("q-btn"),x=(0,l.up)("q-btn-group"),W=(0,l.up)("q-icon"),y=(0,l.up)("q-item-section"),f=(0,l.up)("q-slider"),T=(0,l.up)("q-item"),_=(0,l.up)("HighlightingTextArea"),k=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(k,{class:""},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{ref:"display",class:"row",word:t.currentWord,wordRate:t.wordRate},null,8,["word","wordRate"]),(0,l._)("div",o,[(0,l._)("div",a,[(0,l._)("div",i,[(0,l.Wm)(x,{spread:""},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{flat:"",class:"q-br",icon:t.play?"pause":"play_arrow","aria-label":"play_arrow",onClick:t.handleStartButtonClick},null,8,["icon","onClick"]),(0,l.Wm)(x,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,{flat:"",icon:"chevron_left","aria-label":"chevron_left",onClick:e[0]||(e[0]=e=>t.jumpWords(-1))}),(0,l.Wm)(g,{flat:"",icon:"chevron_right","aria-label":"chevron_right",onClick:e[1]||(e[1]=e=>t.jumpWords(1))})])),_:1})])),_:1})]),(0,l.Wm)(T,{class:"row"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{side:"",class:"col-auto"},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{name:"speed"})])),_:1}),(0,l.Wm)(y,{class:"col"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{modelValue:t.wordRate,"onUpdate:modelValue":e[2]||(e[2]=e=>t.wordRate=e),"label-text-color":"black",min:50,step:25,max:1e3,"switch-label-side":"","label-always":"","switch-marker-labels-side":""},null,8,["modelValue"])])),_:1}),(0,l.Wm)(y,{class:"col-auto"},{default:(0,l.w5)((()=>[(0,l._)("span",null," ca. "+(0,s.zw)((t.allWords.length/t.wordRate*60).toFixed())+" Sec ",1)])),_:1})])),_:1})])]),(0,l._)("div",n,[c,(0,l._)("div",d,[(0,l.Wm)(f,{class:"row full-width",modelValue:t.counter,"onUpdate:modelValue":e[3]||(e[3]=e=>t.counter=e),min:0,max:t.allWords.length-1,label:""},null,8,["modelValue","max"]),(0,l.Wm)(_,{class:"row full-width",onTxtUpdate:t.updateText,highlight:!t.play,currentWord:t.counter,splitText:t.allWords,ref:"TextArea"},null,8,["onTxtUpdate","highlight","currentWord","splitText"])]),h])])),_:1})}const p={id:"container"},m={id:"word"},w=["id"];function g(t,e,r,o,a,i){return(0,l.wg)(),(0,l.iD)("div",p,[(0,l._)("div",m,[((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(3,(e=>(0,l._)("span",{key:e,id:"span_"+e},(0,s.zw)(t.splitWord[e-1]),9,w))),64))])])}const x=(0,l.aZ)({name:"WordDisplay",props:{word:{type:String,required:!0},wordRate:{type:Number,required:!0}},computed:{splitWord(){let t=this.word.trim(),e=Math.round(.4*(t.length+1))-1;return[t.slice(0,e),t[e],t.slice(e+1)]}}});var W=r(4260);const y=(0,W.Z)(x,[["render",g],["__scopeId","data-v-5240a7ef"]]),f=y;r(71);var T=r(8880);const _={class:"container"},k={class:"wordContainer fit"},b=["hidden"],v={key:0,class:"highlights"};function q(t,e,r,o,a,i){const n=(0,l.up)("q-icon");return(0,l.wg)(),(0,l.iD)("div",_,[(0,l._)("div",k,[(0,l._)("div",{hidden:!r.highlight,class:"backdrop box",ref:"backdrop"},[""!==i.highlightText?((0,l.wg)(),(0,l.iD)("mark",v,(0,s.zw)(i.highlightText),1)):(0,l.kq)("",!0),(0,l.Uk)(" "+(0,s.zw)(i.noHighlightText),1)],8,b),(0,l.wy)((0,l._)("textarea",{class:"textInput box",placeholder:"Paste Text here to read.","onUpdate:modelValue":e[0]||(e[0]=t=>a.text=t),ref:"textarea",onFocus:e[1]||(e[1]=t=>t.target.select()),onScroll:e[2]||(e[2]=(...t)=>i.onScroll&&i.onScroll(...t)),onChange:e[3]||(e[3]=(...t)=>i.newText&&i.newText(...t))},"\n      ",544),[[T.nr,a.text]]),(0,l.Wm)(n,{name:"close",onClick:e[4]||(e[4]=t=>i.clearText()),class:"cursor-pointer"})])])}const S={name:"HighlightingTextArea",props:{currentWord:{type:Number,required:!1,default:0},highlight:{type:Boolean,required:!0},splitText:{type:Array,required:!0}},emits:{txtUpdate:{type:Object}},computed:{highlightText(){return this.currentWord<1?"":this.splitText.slice(0,this.currentWord+1).reduce(((t,e)=>t+e))},noHighlightText(){return this.currentWord>=this.splitText.length-1||this.splitText.length<1?"":this.splitText.slice(this.currentWord,this.splitText.length-1).reduce(((t,e)=>t+e))}},data(){return{text:""}},methods:{newText(){this.$emit("txtUpdate",this.text)},clearText(){this.text="",this.newText()},setText(t){this.text=t},async onScroll(){this.$refs.backdrop.scrollTop=this.$refs.textarea.scrollTop,this.$refs.backdrop.scrollLeft=this.$refs.textarea.scrollLeft}}};var C=r(4554),Z=r(7518),R=r.n(Z);const j=(0,W.Z)(S,[["render",q],["__scopeId","data-v-c968920c"]]),A=j;R()(S,"components",{QIcon:C.Z});var D=r(9739);const U=(0,l.aZ)({name:"PageIndex",components:{HighlightingTextArea:A,WordDisplay:f},props:{readText:{type:String,required:!1}},data(){return{allWords:[""],counter:0,play:!1,expanded:!1,wordRate:300}},mounted(){const t=!1;if(this.readText){const t=decodeURIComponent(this.readText);this.updateText(t),this.$refs.TextArea.setText(t)}D.Z.on("keypress-event",(e=>{switch(e.code){case"ArrowUp":this.wordRate+=25,t&&console.log("Key: wr+");break;case"ArrowDown":this.wordRate-=25,t&&console.log("Key: wr-");break;case"ArrowLeft":this.jumpWords(-1),t&&console.log("Key: jmp-");break;case"ArrowRight":this.jumpWords(1),t&&console.log("Key: jmp+");break;case"Space":t&&console.log("Key: pause"),this.handleStartButtonClick()}}))},computed:{currentWord(){return this.allWords[this.counter]}},methods:{handleStartButtonClick(){this.play=!this.play,this.play&&this.startWords()},async startWords(){while(this.play)this.counter=(this.counter+1)%this.allWords.length,0===this.counter&&(this.play=!1),await I(this.getDelay(this.allWords[this.counter]))},async jumpWords(t=1){if(0===this.counter&&-1===t)return;const e=this.play;this.play=!1;for(let r=0;r<3;r++){if(this.counter=(this.counter+t)%this.allWords.length,0===this.counter)break;await I(this.getDelay(this.allWords[this.counter])/3)}e&&this.handleStartButtonClick()},updateText(t){this.allWords=t.split(/(?=\s\S)|(?<=[^-]-)/gm),this.counter=0},getDelay(t,e=2,r=25,l=40,s=100){const o=60/this.wordRate*1e3;return o*this.normalizedLenght(t)},normalizedLenght(t){const e=t.length;return e<2?1:e<4?.8:e>20?2:e>12?1.6:e>8?1.3:1}}});function I(t=1e3){return new Promise((e=>setTimeout(e,t)))}var Q=r(4379),B=r(6375),V=r(1828),z=r(3414),H=r(2035),K=r(3407);const $=(0,W.Z)(U,[["render",u]]),L=$;R()(U,"components",{QPage:Q.Z,QBtnGroup:B.Z,QBtn:V.Z,QItem:z.Z,QItemSection:H.Z,QIcon:C.Z,QSlider:K.Z})}}]);