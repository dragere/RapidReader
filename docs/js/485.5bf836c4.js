"use strict";(self["webpackChunkrapidreader"]=self["webpackChunkrapidreader"]||[]).push([[485],{8485:(e,t,r)=>{r.r(t),r.d(t,{default:()=>L});var l=r(3673),s=r(2323);const a={class:"row justify-center"},o={class:"column",style:{width:"66%"}},i={class:"row justify-center q-mb-md"},n={class:"row"},c=(0,l._)("div",{class:"col"},null,-1),d={class:"col-10"},h=(0,l._)("div",{class:"col"},null,-1);function u(e,t,r,u,p,m){const w=(0,l.up)("word-display"),g=(0,l.up)("q-btn"),x=(0,l.up)("q-btn-group"),y=(0,l.up)("q-icon"),W=(0,l.up)("q-item-section"),f=(0,l.up)("q-slider"),T=(0,l.up)("q-item"),_=(0,l.up)("HighlightingTextArea"),k=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(k,{class:""},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{ref:"display",class:"row",word:e.currentWord,wordRate:e.wordRate},null,8,["word","wordRate"]),(0,l._)("div",a,[(0,l._)("div",o,[(0,l._)("div",i,[(0,l.Wm)(x,{spread:""},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{flat:"",class:"q-br",icon:e.play?"pause":"play_arrow","aria-label":"play_arrow",onClick:e.handleStartButtonClick},null,8,["icon","onClick"]),(0,l.Wm)(x,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,{flat:"",icon:"chevron_left","aria-label":"chevron_left",onClick:t[0]||(t[0]=t=>e.jumpWords(-1))}),(0,l.Wm)(g,{flat:"",icon:"chevron_right","aria-label":"chevron_right",onClick:t[1]||(t[1]=t=>e.jumpWords(1))})])),_:1})])),_:1})]),(0,l.Wm)(T,{class:"row"},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{side:"",class:"col-auto"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{name:"speed"})])),_:1}),(0,l.Wm)(W,{class:"col"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{modelValue:e.wordRate,"onUpdate:modelValue":t[2]||(t[2]=t=>e.wordRate=t),"label-text-color":"black",min:50,step:25,max:1e3,"switch-label-side":"","label-always":"","switch-marker-labels-side":""},null,8,["modelValue"])])),_:1}),(0,l.Wm)(W,{class:"col-auto"},{default:(0,l.w5)((()=>[(0,l._)("span",null,(0,s.zw)((e.allDelays.reduce(((e,t)=>e+t))/1e3).toFixed())+" Sec ",1)])),_:1})])),_:1})])]),(0,l._)("div",n,[c,(0,l._)("div",d,[(0,l.Wm)(f,{class:"row full-width",modelValue:e.counter,"onUpdate:modelValue":t[3]||(t[3]=t=>e.counter=t),min:0,max:e.allWords.length-1,label:""},null,8,["modelValue","max"]),(0,l.Wm)(_,{class:"row full-width",onTxtUpdate:e.updateText,highlight:!e.play,currentWord:e.counter,splitText:e.allWords,ref:"TextArea"},null,8,["onTxtUpdate","highlight","currentWord","splitText"])]),h])])),_:1})}const p={id:"container"},m={id:"word"},w=["id"];function g(e,t,r,a,o,i){return(0,l.wg)(),(0,l.iD)("div",p,[(0,l._)("div",m,[((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(3,(t=>(0,l._)("span",{key:t,id:"span_"+t},(0,s.zw)(e.splitWord[t-1]),9,w))),64))])])}const x=(0,l.aZ)({name:"WordDisplay",props:{word:{type:String,required:!0},wordRate:{type:Number,required:!0}},computed:{splitWord(){let e=this.word.trim(),t=Math.round(.4*(e.length+1))-1;return[e.slice(0,t),e[t],e.slice(t+1)]}}});var y=r(4260);const W=(0,y.Z)(x,[["render",g],["__scopeId","data-v-5240a7ef"]]),f=W;r(71);var T=r(8880);const _={class:"container"},k={class:"wordContainer fit"},b=["hidden"],v={key:0,class:"highlights"};function q(e,t,r,a,o,i){const n=(0,l.up)("q-icon");return(0,l.wg)(),(0,l.iD)("div",_,[(0,l._)("div",k,[(0,l._)("div",{hidden:!r.highlight,class:"backdrop box",ref:"backdrop"},[""!==i.highlightText?((0,l.wg)(),(0,l.iD)("mark",v,(0,s.zw)(i.highlightText),1)):(0,l.kq)("",!0),(0,l.Uk)(" "+(0,s.zw)(i.noHighlightText),1)],8,b),(0,l.wy)((0,l._)("textarea",{class:"textInput box",placeholder:"Paste Text here to read.","onUpdate:modelValue":t[0]||(t[0]=e=>o.text=e),ref:"textarea",onFocus:t[1]||(t[1]=e=>e.target.select()),onScroll:t[2]||(t[2]=(...e)=>i.onScroll&&i.onScroll(...e)),onChange:t[3]||(t[3]=(...e)=>i.newText&&i.newText(...e))},"\n      ",544),[[T.nr,o.text]]),(0,l.Wm)(n,{name:"close",onClick:t[4]||(t[4]=e=>i.clearText()),class:"cursor-pointer"})])])}const S={name:"HighlightingTextArea",props:{currentWord:{type:Number,required:!1,default:0},highlight:{type:Boolean,required:!0},splitText:{type:Array,required:!0}},emits:{txtUpdate:{type:Object}},computed:{highlightText(){return this.currentWord<1?"":this.splitText.slice(0,this.currentWord+1).reduce(((e,t)=>e+t))},noHighlightText(){return this.currentWord>=this.splitText.length-1||this.splitText.length<1?"":this.splitText.slice(this.currentWord,this.splitText.length-1).reduce(((e,t)=>e+t))}},data(){return{text:""}},methods:{newText(){this.$emit("txtUpdate",this.text)},clearText(){this.text="",this.newText()},setText(e){this.text=e},async onScroll(){this.$refs.backdrop.scrollTop=this.$refs.textarea.scrollTop,this.$refs.backdrop.scrollLeft=this.$refs.textarea.scrollLeft}}};var C=r(4554),D=r(7518),Z=r.n(D);const R=(0,y.Z)(S,[["render",q],["__scopeId","data-v-c968920c"]]),j=R;Z()(S,"components",{QIcon:C.Z});var A=r(9739);const U=(0,l.aZ)({name:"PageIndex",components:{HighlightingTextArea:j,WordDisplay:f},props:{readText:{type:String,required:!1}},data(){return{allWords:[""],allDelays:[0],counter:0,play:!1,expanded:!1,wordRate:300}},mounted(){const e=!1;if(this.readText){const e=decodeURIComponent(this.readText);this.updateText(e),this.$refs.TextArea.setText(e)}A.Z.on("keypress-event",(t=>{switch(t.code){case"ArrowUp":this.wordRate+=25,e&&console.log("Key: wr+");break;case"ArrowDown":this.wordRate-=25,e&&console.log("Key: wr-");break;case"ArrowLeft":this.jumpWords(-1),e&&console.log("Key: jmp-");break;case"ArrowRight":this.jumpWords(1),e&&console.log("Key: jmp+");break;case"Space":e&&console.log("Key: pause"),this.handleStartButtonClick()}}))},computed:{currentWord(){return this.allWords[this.counter]}},methods:{handleStartButtonClick(){this.play=!this.play,this.play&&this.startWords()},async startWords(){while(this.play)this.counter=(this.counter+1)%this.allWords.length,0===this.counter&&(this.play=!1),await I(this.allDelays[this.counter])},async jumpWords(e=1){if(0===this.counter&&-1===e)return;const t=this.play;this.play=!1;for(let r=0;r<3;r++){if(this.counter=(this.counter+e)%this.allWords.length,0===this.counter)break;await I(this.getDelay(this.allWords[this.counter])/3)}t&&this.handleStartButtonClick()},updateText(e){this.allWords=e.split(/(?=\s\S)|(?<=[^-]-)/gm),this.allDelays=this.allWords.map(this.getDelay),this.counter=0},getDelay(e,t=2,r=25,l=40,s=100){const a=this.word.trim(),o=a.endsWith(","),i=a.endsWith(";"),n=a.endsWith("."),c=60/this.wordRate*1e3,d=(o?r:0)+(i?l:0)+(n?s:0);return c*this.normalizedLenght(e)+d},normalizedLenght(e){const t=e.length;return t<2?1:t<4?.8:t>20?2:t>12?1.6:t>8?1.3:1}}});function I(e=1e3){return new Promise((t=>setTimeout(t,e)))}var Q=r(4379),B=r(6375),V=r(1828),z=r(3414),H=r(2035),K=r(3407);const $=(0,y.Z)(U,[["render",u]]),L=$;Z()(U,"components",{QPage:Q.Z,QBtnGroup:B.Z,QBtn:V.Z,QItem:z.Z,QItemSection:H.Z,QIcon:C.Z,QSlider:K.Z})}}]);